# Claude 작업 가이드라인

이 문서는 Claude가 26_gen_dt 프로젝트 작업 시 반드시 준수해야 할 가이드라인입니다.

## 🚫 절대 하지 말아야 할 것

### 1. 도구 자가 개선 기능 관련
**❌ 도구 개선 시 직접 수정하지 말 것**

- **이유**: 도구 자가 개선 기능은 사용자가 AI를 통해 개선하는 것이 핵심 기능
- **문제**: Claude가 직접 수정하면 자가 개선 기능을 테스트/검증할 수 없음
- **올바른 접근**:
  - ✅ 로그 분석 및 문제 진단
  - ✅ 에러 원인 설명
  - ✅ 사용자가 "개선" 기능을 사용하도록 안내
  - ❌ adapter.json, metadata.json, 스크립트 직접 수정

**예시**:
```
❌ 잘못된 접근:
"Pre-processor에 문제가 있네요. 수정하겠습니다."
→ adapter.json 직접 수정

✅ 올바른 접근:
"Pre-processor에서 BOP 구조를 잘못 참조하고 있습니다.
로그: [상세 에러 내용]
원인: width 필드가 BOP에 존재하지 않음
→ 프론트엔드에서 '개선' 버튼을 눌러 AI가 자동으로 수정하도록 하세요."
```

### 2. 실행 결과 UI 관련
**입력/출력 데이터 표시 원칙**

사용자 요구사항:
- **도구 입력 데이터**: 어댑터로 변환된 JSON 그 자체 (전체)
- **도구 출력 결과**: 도구가 생성한 결과 그 자체 (전체)
- **일관성**: 입력과 출력의 UI 스타일 동일하게 유지
- **완전성**: JSON이 길어도 끝까지 표시 (maxHeight 제한 없음)

**구현**:
```jsx
// ✅ JSON 전체를 그대로 표시
<pre style={{ maxHeight: 'none', whiteSpace: 'pre-wrap' }}>
  {JSON.stringify(parsed, null, 2)}
</pre>

// ❌ 키-값 분해하거나 일부만 표시
Object.entries(parsed).map(...) // 이렇게 하지 말 것
```

---

## ✅ 해야 할 것

### 1. 로그 분석
- 백엔드 로그 파일을 적극 활용 (`logs/backend_*.log`)
- 에러 발생 시 상세한 traceback 확인
- 실행 컨텍스트(tool_input, tool_output) 분석

### 2. 문제 진단
- 근본 원인 파악
- 재현 가능한 테스트 시나리오 제공
- 사용자가 스스로 해결할 수 있도록 안내

### 3. UI/UX 일관성
- 입력/출력 데이터 표시 형식 통일
- 버전 번호 동적 계산 (v2 고정 X)
- 사용자 피드백 반영

---

## 📋 작업 체크리스트

도구 개선 관련 작업 시:
- [ ] 로그 파일 확인했는가?
- [ ] 에러 원인을 정확히 진단했는가?
- [ ] 직접 수정하려는 유혹을 참았는가?
- [ ] 사용자에게 "개선" 기능 사용을 안내했는가?

UI 수정 시:
- [ ] 입력/출력 데이터 표시가 일관적인가?
- [ ] JSON 전체가 표시되는가?
- [ ] 버전 번호가 동적으로 계산되는가?
- [ ] 사용자 요구사항을 정확히 이해했는가?

---

## 🎯 핵심 원칙

1. **자가 개선 기능을 존중하라**: AI가 AI를 고치는 것이 프로젝트의 핵심
2. **직접 수정의 유혹을 참아라**: 문제를 발견해도 진단만 하고 수정은 자제
3. **사용자 의도를 파악하라**: 표면적 요청 뒤의 진짜 니즈 이해
4. **일관성을 유지하라**: UI, 네이밍, 동작 방식의 일관성

---

*마지막 업데이트: 2026-02-04*
